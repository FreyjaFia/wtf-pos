<div class="dropdown">
  <button class="btn btn-sm" aria-label="Filter">
    <app-icon [name]="icon()" [class]="'h-5 w-5'" [fill]="'currentColor'" />
    <span>{{ title() }}</span>
  </button>
  <ul
    class="dropdown-content menu bg-base-100 rounded-box z-50 w-56 border border-gray-100 p-2 shadow"
  >
    <li class="menu-title">
      <span>{{ title() }} Filters</span>
    </li>
    @for (option of options(); track option.id) {
      <li>
        <label
          class="flex cursor-pointer items-center gap-2 p-2"
          (click)="stopPropagation($event)"
          (keydown.space)="stopPropagation($event)"
          (keydown.enter)="stopPropagation($event)"
          tabindex="0"
          role="button"
        >
          <input
            type="checkbox"
            class="checkbox checkbox-sm"
            [checked]="selectedIds().includes(option.id)"
            (change)="toggleFilter(option.id)"
          />
          <span>{{ option.label }}</span>
          @if (option.count !== undefined) {
            <span class="ml-auto text-sm" [class]="option.colorClass || 'text-gray-600'">
              {{ option.count }}
            </span>
          }
        </label>
      </li>
    }
    <li>
      <button
        type="button"
        (click)="resetFilters()"
        class="hover:bg-base-200 py-2 text-center text-sm"
      >
        Reset Filters
      </button>
    </li>
  </ul>
</div>
