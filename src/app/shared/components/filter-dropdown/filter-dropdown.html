<div class="dropdown dropdown-end">
  <button
    class="btn btn-sm border-gray-300 bg-white shadow-sm hover:bg-gray-50 cursor-pointer whitespace-nowrap"
    aria-label="Filter"
  >
    <app-icon [name]="icon()" [class]="'h-5 w-5 text-gray-700'" [fill]="'currentColor'" />
    <span class="font-semibold">{{ title() }}</span>
  </button>
  <ul
    class="dropdown-content menu rounded-box z-50 w-56 border border-gray-200 bg-white p-2 shadow-lg"
  >
    <li class="menu-title">
      <span class="font-semibold text-gray-700">{{ title() }} Filters</span>
    </li>
    @for (option of options(); track option.id) {
      <li>
        <label
          class="flex cursor-pointer items-center gap-2 rounded-lg p-2 hover:bg-gray-50"
          (click)="stopPropagation($event)"
          (keydown.space)="stopPropagation($event)"
          (keydown.enter)="stopPropagation($event)"
          tabindex="0"
          role="button"
        >
          <input
            type="checkbox"
            class="checkbox checkbox-sm"
            [checked]="selectedIds().includes(option.id)"
            (change)="toggleFilter(option.id)"
          />
          <span class="font-medium flex-1">{{ option.label }}</span>
          @if (option.count !== undefined) {
            <span class="inline-flex items-center justify-center min-w-6 rounded-full bg-gray-100 px-2 text-xs font-semibold text-gray-600">
              {{ option.count }}
            </span>
          }
        </label>
      </li>
    }
    <li>
      <button
        type="button"
        (click)="resetFilters()"
        class="rounded-lg py-2 text-center text-sm text-gray-600 hover:bg-gray-50"
      >
        Reset Filters
      </button>
    </li>
  </ul>
</div>
